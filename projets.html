<!DOCTYPE html>
<html lang="fr">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Portfolio</title>
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="style_mobile.css">
        <!-- <link rel="preload" href="/fonts/myfont.woff2" as="font" type="font/woff2" crossorigin="anonymous"> -->
        <script src="script-general.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    </head>

    <body class="body-projets">
        <div class="container-menu-projets">

                  <div class="elements-menu-haut" id="nom-menu">
                        <a class="a-menu logo-menu hoverable" href="index.html"></a>
                        <a class="a-menu hoverable" id="a-nom-menu" href="index.html">Agathe Cotton</a></div>
                    <div class="elements-menu-haut hoverable" id="bio-menu"><a class="a-menu" href="bio.html" data-i18n="menu-bio">Bio</a></div>
                    <div class="elements-menu-haut hoverable" id="projet-menu"><a class="a-menu" href="mosaique.html" data-i18n="menu-projets">Projets</a></div>
                    <div class="elements-menu-haut hoverable" id="lang-menu"><a class="a-menu" href="#" data-i18n="menu-lang">FR / ENG</a></div>
                    <div class="elements-menu-bas hoverable" id="tel-menu" data-i18n="menu-tel">06 89 32 68 76</div>
                    <div class="elements-menu-bas hoverable" id="mail-menu">agathe.cotton@gmail.com</div>
                    <div class="elements-menu-bas hoverable" id="insta-menu"><a class="a-menu" href="https://www.instagram.com/happy_factoryy/?hl=fr" target="_blank">@happy_factoryy</a></div>
                
                    <!-- caracteres de fleches : ·ê∏·ê≥·ê±·êØ ÀÇÀÉÀÑÀÖ  ü¢íü¢ëü¢ì  ·êä·êÖ·êÉ·êÅ -->
                    <button class="fleches-sections-projets hoverable" id="fleche-gauche-projets">·ê∏</button>
                    <button class="fleches-sections-projets hoverable" id="fleche-droite-projets">·ê≥</button>
                    <button class="fleches-sections-projets" id="fleche-haut-projets">·ê±</button>
                    <button class="fleches-sections-projets" id="fleche-bas-projets">·êØ</button>

        </div>

        <div class="container-projets" id="container-projets">   

            <section class="grid-projets" id="projet-OffKey">
                <div class="zone-texte-projets" id="texte-OffKey">
                    <h2 class="titre-projets" id="titre-OffKey">OffKey</h2>
                    <span class="date-projets">2024</span>
                    <span class="description-projets" data-i18n="projet-offkey-1">Identit√© visuelle g√©n√©rative d‚Äôun festival fictif de musique techno bas√©e sur des visuels g√©n√©ratifs programm√©s en p5.js<br>
Esth√©tique glauque, organique et rythmique incarn√©e par le mille-pattes<br>
D√©clinaison sur multiples supports (affiches, r√©seaux sociaux, badges, produits d√©riv√©s...)</span>
                    <span class="contexte-projets" data-i18n="projet-offkey-2">Projet r√©alis√© lors d‚Äôun semestre erasmus √†¬†Politecnico di Milano</span>
                    <span class="collab-projets" data-i18n="projet-offkey-3">avec Luca SCHARRENBACH</span>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/offkey_7.jpg" alt="Clone Image OffKey 7"></div>
                      <!-- Vid√©o avec placeholder -->
                      <div class="carrousel-slide" id="vid-offkey-1" data-media-type="video" data-video-src="asset/media/offkey-vid_1.mp4" data-poster="asset/img/high/offkey_1-thumbnail.jpg">
                        <img src="asset/img/low/offkey_1-thumbnail.jpg" alt="Vid√©o OffKey 1" class="media-placeholder"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/offkey_1.jpg" alt="Image OffKey 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/offkey_2.jpg" alt="Image OffKey 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/offkey_3.jpg" alt="Image OffKey 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/offkey_4.jpg" alt="Image OffKey 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/offkey_5.jpg" alt="Image OffKey 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/offkey_6.jpg" alt="Image OffKey 6"></div>          
          <!-- Audio avec placeholder 
          <div class="carrousel-slide" id="audio-HAL9000-1" data-media-type="audio" data-audio-src="asset/media/audio-1_pride.mp3" data-poster="asset/img/low/offkey_4-thumbnail.jpg">
            <img src="asset/img/low/offkey_4-thumbnail.jpg" alt="Audio OffKey" class="media-placeholder">
          </div>-->
          
          <!-- Page web int√©gr√©e avec placeholder 
          <div class="carrousel-slide" id="iframe-just-click" data-media-type="iframe" data-iframe-src="https://agth3.github.io/just-click/" data-poster="asset/img/low/just-click_3-thumbnail.jpg">
            <img src="asset/img/low/just-click_3-thumbnail.jpg" alt="Site web OffKey" class="media-placeholder">
          </div>-->
          <div class="carrousel-slide"><img src="asset/img/low/offkey_7.jpg" alt="Image OffKey 7"></div>
          <div class="carrousel-slide"><img src="asset/img/low/offkey_1-thumbnail.jpg" alt="Clone Thumbnail Vid√©o OffKey 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>

            <section class="grid-projets" id="projet-Stone-of-Amasha">
                <div class="zone-texte-projets" id="texte-Stone-of-Amasha">
                    <h2 class="titre-projets" id="titre-Stone-of-Amasha">The Stone of Amasha</h2>
                    <span class="date-projets">2024</span>
                    <span class="description-projets" data-i18n="projet-amasha-1">Narration interactive abordant les dynamiques de pouvoir et marginalisations fond√©es sur l'√¢ge √† travers un monde fantastique o√π r√®gnent complots, crise politique et religieuse<br>Storyworld, design de personnages et √©criture de scenario</span>
                    <p class="p-projets">
                      <span class="description-projets" data-i18n="projet-amasha-2">Lecture du premier chapitre sur </span>
                      <a class="liens-externes" href="https://arcweave.com/app/project/nwEp2mP04a/play" target="_blank">Arcweave</a>
                    </p>
                    <span class="contexte-projets" data-i18n="projet-amasha-3">Projet r√©alis√© lors d‚Äôun semestre erasmus √†¬†Politecnico di Milano</span>
                    <span class="collab-projets" data-i18n="projet-amasha-4">avec Giuseppe CRITONE, Natalie ILLE, Natali√° KRAJCZ√ÅR, Luca SCHARRENBACH et Marta ZILIOLI</span>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/amasha_7.jpg" alt="Clone Image Amasha 7"></div>
                      <!-- Vid√©o avec placeholder -->
                      <!-- <div class="carrousel-slide" id="vid-offkey-1" data-media-type="video" data-video-src="asset/media/amasha-vid_1.mp4" data-poster="asset/img/low/amasha_1.jpg">
                        <img src="asset/img/low/amasha_1.jpg" alt="Vid√©o Stone of Amasha 1" class="media-placeholder">
                      </div> -->
                      <div class="carrousel-slide"><img src="asset/img/low/amasha_1.jpg" alt="Image Amasha 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/amasha_2.jpg" alt="Image Amasha 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/amasha_3.jpg" alt="Image Amasha 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/amasha_4.jpg" alt="Image Amasha 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/amasha_5.jpg" alt="Image Amasha 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/amasha_8.jpg" alt="Image Amasha 8"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/amasha_6.jpg" alt="Image Amasha 6"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/amasha_7.jpg" alt="Image Amasha 7"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/amasha_1.jpg" alt="Clone Image Amasha 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>

            <section class="grid-projets" id="projet-Brique-Bloc">
                <div class="zone-texte-projets" id="texte-Brique-Bloc">
                    <h2 class="titre-projets" id="titre-Brique-Bloc">Brique Bloc</h2>
                    <span class="date-projets">2022</span>
                    <span class="description-projets" data-i18n="projet-brique-bloc-1">Typographie enfantine inspir√©e des typographies modulaires et des jeux de construction.</span>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/brique-bloc_5.jpg" alt="Clone Image Brique-bloc 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/brique-bloc_1.jpg" alt="Image Brique-bloc 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/brique-bloc_2.jpg" alt="Image Brique-bloc 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/brique-bloc_3.jpg" alt="Image Brique-bloc 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/brique-bloc_4.jpg" alt="Image Brique-bloc 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/brique-bloc_5.jpg" alt="Image Brique-bloc 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/brique-bloc_1.jpg" alt="Clone Image Brique-bloc 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>

            <section class="grid-projets" id="projet-Affiches-Animees">
                <div class="zone-texte-projets" id="texte-Affiches-Animees">
                    <h2 class="titre-projets" id="titre-Affiches-Animees">Affiches anim√©es</h2>
                    <span class="date-projets">2023</span>
                    <span class="description-projets" data-i18n="projet-hack-1">Affiches anim√©es sur la th√©matique du piratage informatique, pr√©sent√©es sur les panneaux publicitaires d‚ÄôOrl√©ans dans le cadre d‚Äôun partenariat avec la ville.</span>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/hack_3.jpg" alt="Clone Image Affiches anim√©es 3"></div>
                      <div class="carrousel-slide" id="vid-hack-1" data-media-type="video" data-video-src="asset/media/hack-vid_1.mp4" data-poster="asset/img/high/hack-thumbnail_1.jpg">
                        <img src="asset/img/low/hack-thumbnail_1.jpg" alt="Vid√©o hack 1" class="media-placeholder"></div>
                      <div class="carrousel-slide" id="vid-hack-2" data-media-type="video" data-video-src="asset/media/hack-vid_2.mp4" data-poster="asset/img/high/hack-thumbnail_2.jpg">
                        <img src="asset/img/low/hack-thumbnail_2.jpg" alt="Vid√©o hack 2" class="media-placeholder"></div>
                      <div class="carrousel-slide" id="vid-hack-3" data-media-type="video" data-video-src="asset/media/hack-vid_3.mp4" data-poster="asset/img/high/hack-thumbnail_3.jpg">
                        <img src="asset/img/low/hack-thumbnail_3.jpg" alt="Vid√©o hack 3" class="media-placeholder"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/hack_1.jpg" alt="Image Affiches anim√©es 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/hack_2.jpg" alt="Image Affiches anim√©es 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/hack_3.jpg" alt="Image Affiches anim√©es 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/hack_1.jpg" alt="Clone Image Affiches anim√©es 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>

            <section class="grid-projets" id="projet-Vitrine">
                <div class="zone-texte-projets" id="texte-Vitrine">
                    <h2 class="titre-projets" id="titre-Vitrine">La Vitrine</h2>
                    <span class="date-projets">2022</span>
                    <p class="p-projets">
                      <span class="description-projets" data-i18n="projet-vitrine-1">Identit√© visuelle d‚Äôune galerie d‚Äôart contemporain fictive </span>
                      <span class="italique" data-i18n="projet-vitrine-2">(La Vitrine)</span>
                      <span class="description-projets" data-i18n="projet-vitrine-3"> bas√©e sur un logo d√©clinable reprenant l‚Äôaspect d‚Äôun projecteur lumineux.<br>D√©clinaison sur affiches et d√©pliant</span>
                    </p>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/vitrine_7.jpg" alt="Clone Image Vitrine 8"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/vitrine_1.jpg" alt="Image Vitrine 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/vitrine_2.jpg" alt="Image Vitrine 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/vitrine_3.jpg" alt="Image Vitrine 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/vitrine_4.jpg" alt="Image Vitrine 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/vitrine_5.jpg" alt="Image Vitrine 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/vitrine_6.jpg" alt="Image Vitrine 6"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/vitrine_7.jpg" alt="Image Vitrine 7"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/vitrine_8.jpg" alt="Image Vitrine 8"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/vitrine_1.jpg" alt="Clone Image Vitrine 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>

            <section class="grid-projets" id="projet-Oursins">
                <div class="zone-texte-projets" id="texte-Oursins">
                    <h2 class="titre-projets" id="titre-Oursins">Les Oursins</h2>
                    <span class="date-projets">2023</span>
                    <p class="p-projets">
                      <span class="description-projets" data-i18n="projet-oursins-1">Identit√© visuelle d‚Äôun groupe activiste √©cologique fictif </span>
                      <span class="italique" data-i18n="projet-oursins-2">(Les Oursins)</span>
                      <span class="description-projets" data-i18n="projet-oursins-3"> luttant contre la pollution plastique dont le symbole est √† l‚Äôimage de leur mode d‚Äôaction non-violent mais irritant<br>D√©clinaison sur affiches, cartes de visite, maquette de site web et produits d√©riv√©s<br>Conception d‚Äôun catalogue satirique vendant la beaut√© des d√©chets plastiques</span>
                    </p>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/oursins-edition_6.jpg" alt="Clone Image Oursins √©dition 6"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/oursins_1.jpg" alt="Image Oursins 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/oursins_2.jpg" alt="Image Oursins 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/oursins_3.jpg" alt="Image Oursins 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/oursins_4.jpg" alt="Image Oursins 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/oursins_5.jpg" alt="Image Oursins 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/oursins_6.jpg" alt="Image Oursins 6"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/oursins-edition_1.jpg" alt="Image Oursins √©dition 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/oursins-edition_2.jpg" alt="Image Oursins √©dition 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/oursins-edition_3.jpg" alt="Image Oursins √©dition 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/oursins-edition_4.jpg" alt="Image Oursins √©dition 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/oursins-edition_5.jpg" alt="Image Oursins √©dition 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/oursins-edition_6.jpg" alt="Image Oursins √©dition 6"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/oursins_1.jpg" alt="Clone Image Oursins 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>
          
           <section class="grid-projets" id="projet-Cimes">
                <div class="zone-texte-projets" id="texte-Cimes">
                    <h2 class="titre-projets" id="titre-Cimes">Les Cimes</h2>
                    <span class="date-projets">2023</span>
                    <p class="p-projets">
                      <span class="description-projets" data-i18n="projet-cimes-1">Design √©ditorial d‚Äôune maison d‚Äô√©dition fictive sp√©cialis√©e sur les arbres </span>
                      <span class="italique" data-i18n="projet-cimes-2">(Les Cimes)</span>
                      <span class="description-projets" data-i18n="projet-cimes-3">, proposant diverses collections (encyclop√©die des arbres, litt√©rature sur les arbres, herbiers et guides techniques sur le bois)<br>Conception d‚Äôune collection de guides de randonn√©e th√©matique </span>
                      <span class="italique" data-i18n="projet-cimes-4">(Les Sentiers de l‚ÄôArbre)</span>
                      <span class="description-projets" data-i18n="projet-cimes-5"> proposant des sentiers d'observation d‚Äôessences locales et mise en page d‚Äôune √©dition sur le ch√™ne p√©doncul√© en r√©gion Centre-Val de Loire</span>
                    </p>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/cimes_7.jpg" alt="Clone Image Cimes 9"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/cimes_1.jpg" alt="Image Cimes 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/cimes_2.jpg" alt="Image Cimes 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/cimes_3.jpg" alt="Image Cimes 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/cimes_4.jpg" alt="Image Cimes 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/cimes_5.jpg" alt="Image Cimes 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/cimes_6.jpg" alt="Image Cimes 6"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/cimes_7.jpg" alt="Image Cimes 7"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/cimes_8.jpg" alt="Image Cimes 8"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/cimes_9.jpg" alt="Image Cimes 9"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/cimes_1.jpg" alt="Clone Image Cimes 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>

             <section class="grid-projets" id="projet-Kaleidoscope">
                <div class="zone-texte-projets" id="texte-Kaleidoscope">
                    <h2 class="titre-projets" id="titre-Kaleidoscope">Kal√©idoscope musical</h2>
                    <span class="date-projets">2022</span>
                    <span class="description-projets" data-i18n="projet-kaleidoscope-1">Photomontage de l‚ÄôOrchestre Symphonique d‚ÄôOrl√©ans r√©alis√© √† l‚Äôoccasion de son centenaire et expos√© au th√©√¢tre d‚ÄôOrl√©ans.<br>R√©p√©tition de fragments photographiques cr√©ant un chaos organis√© rappelant les mouvements de la musique</span>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/kaleidoscope-zoom_4.jpg" alt="Clone Image Kal√©idoscope musical zoom 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/kaleidoscope_1.jpg" alt="Image Kal√©idoscope musical 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/kaleidoscope_2.jpg" alt="Image Kal√©idoscope musical 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/kaleidoscope_3.jpg" alt="Image Kal√©idoscope musical 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/kaleidoscope_4.jpg" alt="Image Kal√©idoscope musical 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/kaleidoscope_5.jpg" alt="Image Kal√©idoscope musical 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/kaleidoscope_6.jpg" alt="Image Kal√©idoscope musical 6"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/kaleidoscope-zoom_1.jpg" alt="Image Kal√©idoscope musical zoom 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/kaleidoscope-zoom_2.jpg" alt="Image Kal√©idoscope musical zoom 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/kaleidoscope-zoom_3.jpg" alt="Image Kal√©idoscope musical zoom 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/kaleidoscope-zoom_4.jpg" alt="Image Kal√©idoscope musical zoom 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/kaleidoscope_1.jpg" alt="Clone Image Kal√©idoscope musical 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>

             <section class="grid-projets" id="projet-HAL9000">
                <div class="zone-texte-projets" id="texte-HAL9000">
                    <h2 class="titre-projets" id="titre-HAL9000">HAL9000/ES</h2>
                    <span class="date-projets">2024</span>
                    <p class="p-projets">
                      <span class="description-projets" data-i18n="projet-HAL9000-1">Jeu vid√©o th√©matique sur les intelligences artificielles questionnant leur capacit√© de reconnaissance et de compr√©hension des √©motions humaines au travers de l‚ÄôIA HAL9000 du film </span>
                      <span class="italique" data-i18n="projet-HAL9000-2">2001¬†: l‚ÄôOdyss√©e de l‚Äôespace</span>
                      <span class="description-projets" data-i18n="projet-HAL9000-3"> (Stanley Kubrick, 1968)<br>Walking simulator immersif explorant le syst√®me √©motionnel de HAL, o√π chaque pi√®ce incarne une √©motion simul√©e par l‚ÄôIA du film (fiert√©, doute, d√©dain et peur)<br>Textures visuelles g√©n√©r√©es par IA (DALL-E 2), mod√©lisation 3D des pi√®ces, design sonore et programmation des interactions et des m√©caniques de jeu, d√©clinaison des visuels sur affiches, d√©pliant et carte grav√©e</span>
                    </p>
                    <span class="contexte-projets" data-i18n="projet-HAL9000-4">Projet r√©alis√© au sein du programme de recherche √âdition M√©dia Design de l‚ÄôESAD Orl√©ans</span>
                    <span class="collab-projets" data-i18n="projet-HAL9000-5">avec Matis ARVIEU, Lisa AL√âGOT, Seona LIM, Vaiana Massonaud, Monika ≈†KODOV√Å, Jade ROCHER</span>      
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/HAL9000_5.jpg" alt="Clone Image HAL900/ES 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/HAL9000-screen_1.jpg" alt="Image screenshot HAL900/ES 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/HAL9000-screen_2.jpg" alt="Image screenshot HAL900/ES 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/HAL9000-screen_3.jpg" alt="Image screenshot HAL900/ES 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/HAL9000-screen_4.jpg" alt="Image screenshot HAL900/ES 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/HAL9000-screen_5.jpg" alt="Image screenshot HAL900/ES 5"></div>
                        <!--Audios-->
                      <div class="carrousel-slide" id="audio-HAL9000-1" data-media-type="audio" data-audio-src="asset/media/audio-1_pride.mp3" data-poster="asset/img/high/HAL9000-thumbnail_1.jpg">
                        <img src="asset/img/low/HAL9000-thumbnail_1.jpg" alt="Audio HAL9000 pride" class="media-placeholder"></div>
                      <div class="carrousel-slide" id="audio-HAL9000-2" data-media-type="audio" data-audio-src="asset/media/audio-2_doubt.mp3" data-poster="asset/img/high/HAL9000-thumbnail_2.jpg">
                        <img src="asset/img/low/HAL9000-thumbnail_2.jpg" alt="Audio HAL9000 doubt" class="media-placeholder"></div>
                      <div class="carrousel-slide" id="audio-HAL9000-3" data-media-type="audio" data-audio-src="asset/media/audio-3_disdain.mp3" data-poster="asset/img/high/HAL9000-thumbnail_3.jpg">
                        <img src="asset/img/low/HAL9000-thumbnail_3.jpg" alt="Audio HAL9000 disdain" class="media-placeholder"></div>
                      <div class="carrousel-slide" id="audio-HAL9000-4" data-media-type="audio" data-audio-src="asset/media/audio-4_fear.mp3" data-poster="asset/img/high/HAL9000-thumbnail_4.jpg">
                        <img src="asset/img/low/HAL9000-thumbnail_4.jpg" alt="Audio HAL9000 fear" class="media-placeholder"></div>
                      
                      <div class="carrousel-slide"><img src="asset/img/low/HAL9000_1.jpg" alt="Image HAL900/ES 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/HAL9000_2.jpg" alt="Image HAL900/ES 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/HAL9000_3.jpg" alt="Image HAL900/ES 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/HAL9000_4.jpg" alt="Image HAL900/ES 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/HAL9000_5.jpg" alt="Image HAL900/ES 5"></div>
                      

                      <div class="carrousel-slide"><img src="asset/img/low/HAL9000-screen_1.jpg" alt="Clone Image screenshot HAL900/ES 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>

              <section class="grid-projets" id="projet-Entre-et-tenir-pt1">
                <div class="zone-texte-projets" id="texte-Entre-et-tenir-pt1">
                    <h2 class="titre-projets" id="titre-Entre-et-tenir-pt1">Entre et tenir - Partie. 1</h2>
                    <span class="date-projets">2025</span>
                    <span class="description-projets" data-i18n="projet-entre-pt1-1">Projet plastique du DNSEP constitu√© d'un ensemble vari√© multim√©dia de dispositifs cherchant √† repenser le rapport de l'Homme √† la nature. Il vise √† trouver les moyens plastique pour repr√©senter l‚Äôinterconnexion globale des vivants en mobilisant l'√©dition et l‚Äôinstallation comme des espaces d‚Äôexp√©rimentation de cet √©cosyst√®me.</span>
                    <!-- <div class="sous-titre-projets" data-i18n="projet-entre-pt1-2">S√©rie d‚Äô√©ditions</div> -->
                    <span class="description-projets" data-i18n="projet-entre-pt1-3">Variation d'√©ditions papier explorant le motif du r√©seau et des racines</span>
                    <!-- <div class="sous-titre-projets" data-i18n="projet-entre-pt1-4">Installation immersive en papier</div> -->
                    <span class="description-projets" data-i18n="projet-entre-pt1-5">Installation √† partir de frottages en grand format de racines, cr√©ant un espace de d√©couverte et d‚Äôimmersion au sein du r√©seau</span>
                    <!-- <div class="sous-titre-projets" data-i18n="projet-entre-pt1-6">Tissages de photographies</div> -->
                    <span class="description-projets" data-i18n="projet-entre-pt1-7">Exploration du tissage de photographie comme repr√©sentation symbolique de la connexion</span>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir_7.jpg" alt="Clone Image Entre et tenir pt.1 8"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir_1.jpg" alt="Image Entre et tenir pt.1 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir_2.jpg" alt="Image Entre et tenir pt.1 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir_3.jpg" alt="Image Entre et tenir pt.1 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir_4.jpg" alt="Image Entre et tenir pt.1 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir_5.jpg" alt="Image Entre et tenir pt.1 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir_6.jpg" alt="Image Entre et tenir pt.1 6"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir_7.jpg" alt="Image Entre et tenir pt.1 7"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir_8.jpg" alt="Image Entre et tenir pt.1 8"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir_1.jpg" alt="Clone Image Entre et tenir pt.1 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>

            <section class="grid-projets" id="projet-Entre-et-tenir-pt2">
                <div class="zone-texte-projets" id="texte-Entre-et-tenir-pt2">
                    <h2 class="titre-projets" id="titre-Entre-et-tenir-pt2">Entre et tenir - Partie 2</h2>
                    <span class="date-projets">2025</span>
                    <span class="description-projets" data-i18n="projet-entre-pt2-1">Projet plastique du DNSEP constitu√© d'un ensemble vari√© multim√©dia de dispositifs cherchant √† repenser le rapport de l'Homme √† la nature. Il vise √† trouver les moyens plastique pour repr√©senter l‚Äôinterconnexion globale des vivants en mobilisant l'√©dition et l‚Äôinstallation comme des espaces d‚Äôexp√©rimentation de cet √©cosyst√®me.</span>
                    <div class="sous-titre-projets" data-i18n="projet-entre-pt2-2">Installation en r√©alit√© augment√©e</div>
                    <span class="sous-description-projets" data-i18n="projet-entre-pt2-3">Reconstitution en AR de connexions racinaires entre des souches pour illustrer dynamiquement les ph√©nom√®nes de diffusion et communication au sein des r√©seaux racinaires afin de conscientiser la richesse et la vari√©t√© de ces transmissions.<br>Installation accompagn√©e d‚Äôun montage vid√©o contemplatif d√©voilant les reconstitutions 3D des souches, obtenues par photogramm√©trie.</span>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir-2_2.jpg" alt="Clone Image Entre et tenir pt.2 2"></div>
                      <!-- <div class="carrousel-slide" id="vid-entre-et-tenir-2_1" data-media-type="video" data-video-src="asset/media/entre-et-tenir-2-vid_1.mp4" data-poster="asset/img/low/entre-et-tenir-2_1.jpg">
                        <img src="asset/img/low/entre-et-tenir-2_1.jpg" alt="Vid√©o Entre-et-tenir-2 1" class="media-placeholder"></div> -->
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir-2_1.jpg" alt="Image Entre et tenir pt.2 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir-2_2.jpg" alt="Image Entre et tenir pt.2 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/entre-et-tenir-2_1.jpg" alt="Clone Image Entre et tenir pt.2 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>

             <section class="grid-projets" id="projet-Memoire">
                <div class="zone-texte-projets" id="texte-Memoire">
                    <h2 class="titre-projets" id="titre-Memoire">Conversations souterraines : communication entre vivants humains et non-humains</h2>
                    <span class="date-projets">2025</span>
                    <span class="description-projets" data-i18n="memoire-1">M√©moire de DNSEP interrogeant l‚Äô√©mergence d‚Äôun rapport sensible de l‚Äôhomme aÃÄ l‚Äôarbre √† travers une repr√©sentation multidimensionnelle et dynamique des r√©seaux racinaires, r√©v√©lant l'arbre comme une entit√© intelligente et communicante.<br>Exploration de la page web comme support d‚Äô√©dition, mettant en pratique la question des r√©seaux.</span>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/memoire_7.jpg" alt="Clone Image M√©moire 7"></div>
                      <!-- <div class="carrousel-slide" id="iframe-memoire" data-media-type="iframe" data-iframe-src="https://agth3.github.io/Memoire/" data-poster="asset/img/low/memoire_1.jpg">
                        <img src="asset/img/low/memoire_1.jpg" alt="Site web M√©moire" class="media-placeholder"></div> -->
                      <div class="carrousel-slide lien-externe-slide"><a href="https://agth3.github.io/Memoire/" target="_blank" rel="noopener noreferrer" class="lien-externe-texte">Voir le site</a><img src="asset/img/low/memoire_1.jpg" alt="Image M√©moire 1"></div>
                      <div class="carrousel-slide"><!--<a href="https://agth3.github.io/Memoire/" target="_blank" rel="noopener noreferrer" class="lien-externe-texte">Voir le site</a>--><img src="asset/img/low/memoire_2.jpg" alt="Image M√©moire 2"></div>
                      <div class="carrousel-slide"><!--<a href="https://agth3.github.io/Memoire/" target="_blank" rel="noopener noreferrer" class="lien-externe-texte">Voir le site</a>--><img src="asset/img/low/memoire_3.jpg" alt="Image M√©moire 3"></div>
                      <div class="carrousel-slide"><!--<a href="https://agth3.github.io/Memoire/" target="_blank" rel="noopener noreferrer" class="lien-externe-texte">Voir le site</a>--><img src="asset/img/low/memoire_4.jpg" alt="Image M√©moire 4"></div>
                      <div class="carrousel-slide"><!--<a href="https://agth3.github.io/Memoire/" target="_blank" rel="noopener noreferrer" class="lien-externe-texte">Voir le site</a>--><img src="asset/img/low/memoire_5.jpg" alt="Image M√©moire 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/memoire_6.jpg" alt="Image M√©moire 6"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/memoire_7.jpg" alt="Image M√©moire 7"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/memoire_1.jpg" alt="Clone Image M√©moire 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>

             <section class="grid-projets" id="projet-Phytomorphose">
                <div class="zone-texte-projets" id="texte-Phytomorphose">
                    <h2 class="titre-projets" id="titre-Phytomorphose">Phytomorphose</h2>
                    <span class="date-projets">2024</span>
                    <p class="p-projets">
                      <span class="description-projets" data-i18n="phytom-1">Animation en r√©alit√© augment√©e proposant une deuxi√®me lecture du </span>
                      <span class="italique" data-i18n="phytom-2">Portrait du peintre Gabriel Deschamps</span>
                      <span class="description-projets" data-i18n="phytom-1">, profil sculpt√© en bronze par Auguste Pr√©rault (1809-1879) pr√©sent au Mus√©e des Beaux-Arts d‚ÄôOrl√©ans<br>Ce projet aborde l‚Äôopposition nature/culture en transformant la chevelure et la barbe du profil en √©l√©ments v√©g√©taux se d√©ployant dans l‚Äôespace mus√©al</span>
                    </p>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/phytom_6.jpg" alt="Clone Image Phytomorphose 6"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/phytom_1.jpg" alt="Image Phytomorphose 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/phytom_2.jpg" alt="Image Phytomorphose 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/phytom_3.jpg" alt="Image Phytomorphose 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/phytom_4.jpg" alt="Image Phytomorphose 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/phytom_5.jpg" alt="Image Phytomorphose 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/phytom_6.jpg" alt="Image Phytomorphose 6"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/phytom_1.jpg" alt="Clone Image Phytomorphose 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>

            <section class="grid-projets" id="projet-Just-Click">
                <div class="zone-texte-projets" id="texte-Just-Click">
                    <h2 class="titre-projets" id="titre-Just-Click">You Just Have To click</h2>
                    <span class="date-projets">2022</span>
                    <span class="description-projets" data-i18n="just-click-1">Webdesign exp√©rimental d'un site web inutile testant la patience de l‚Äôutilisateur pour interroger la valeur que ce dernier accorde √† son propre temps.</span>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/just-click_4.jpg" alt="Clone Image Just-Click 4"></div>
                      <div class="carrousel-slide" id="iframe-just-click" data-media-type="iframe" data-iframe-src="https://agth3.github.io/just-click/" data-poster="asset/img/low/just-click_3-thumbnail.jpg">
                        <img src="asset/img/low/just-click_3-thumbnail.jpg" alt="Site web Just click" class="media-placeholder"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/just-click_1.jpg" alt="Image Just-Click 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/just-click_2.jpg" alt="Image Just-Click 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/just-click_3.jpg" alt="Image Just-Click 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/just-click_4.jpg" alt="Image Just-Click 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/just-click_1.jpg" alt="Clone Image Just-Click 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                  </div>
                </div>
            </section>

            <section class="grid-projets" id="projet-Catalogue-bouees">
                <div class="zone-texte-projets" id="texte-Catalogue-bouees">
                    <h2 class="titre-projets" id="titre-Catalogue-bouees">Catalogue de bou√©es</h2>
                    <span class="date-projets">2022</span>
                    <span class="description-projets" data-i18n="bouees-1">Catalogue satirique de bou√©es gonflables interrogeant la surconsommation au travers de l‚Äôesth√©tique excentrique du kitsch.</span>
                </div>
                <div class="section-slide">
                  <div class="carrousel-container">
                    <div class="carrousel-track">
                      <div class="carrousel-slide"><img src="asset/img/low/catalogue-bouees_7.jpg" alt="Clone Image Catalogue de bou√©es 9"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/catalogue-bouees_1.jpg" alt="Image Catalogue de bou√©es 1"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/catalogue-bouees_2.jpg" alt="Image Catalogue de bou√©es 2"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/catalogue-bouees_3.jpg" alt="Image Catalogue de bou√©es 3"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/catalogue-bouees_4.jpg" alt="Image Catalogue de bou√©es 4"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/catalogue-bouees_5.jpg" alt="Image Catalogue de bou√©es 5"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/catalogue-bouees_6.jpg" alt="Image Catalogue de bou√©es 6"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/catalogue-bouees_7.jpg" alt="Image Catalogue de bou√©es 7"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/catalogue-bouees_8.jpg" alt="Image Catalogue de bou√©es 8"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/catalogue-bouees_9.jpg" alt="Image Catalogue de bou√©es 9"></div>
                      <div class="carrousel-slide"><img src="asset/img/low/catalogue-bouees_1.jpg" alt="Clone Image Catalogue de bou√©es 1"></div>
                    </div>
                    <div class="previous-frame"></div>
                    <div class="focus-frame"></div>
                    <div class="next-frame"></div>
                    <!-- <div class="scroll-indicator"></div> -->
                  </div>
                </div>
            </section>
        </div>

    </body>

<script>

//    GESTION DES SLIDES AVEC FLECHES ET CLAVIER
const container = document.getElementById("container-projets");
const btnLeft = document.getElementById("fleche-gauche-projets");
const btnRight = document.getElementById("fleche-droite-projets");
const btnUp = document.getElementById("fleche-haut-projets");
const btnDown = document.getElementById("fleche-bas-projets");
const sections = document.querySelectorAll(".grid-projets");

const sectionWidth = window.innerWidth;
let currentIndex = 0;
let isMobile = window.innerWidth <= 1024;

// FONCTION DE DEBUG - √Ä RETIRER PLUS TARD
// function debugScroll() {
//   console.log(`Current state:
//     isMobile: ${isMobile}
//     currentIndex: ${currentIndex}
//     container scrollTop: ${container.scrollTop}
//     container scrollLeft: ${container.scrollLeft}
//     window height: ${window.innerHeight}
//     window width: ${window.innerWidth}
//     sections length: ${sections.length}`);
// }

function updateButtons() {
  if (isMobile) {
    // Mobile : navigation verticale des sections
    btnUp.disabled = currentIndex === 0;
    btnDown.disabled = currentIndex === sections.length - 1;
    btnLeft.disabled = true;
    btnRight.disabled = true;
  } else {
    // Desktop : navigation horizontale des sections
    btnLeft.disabled = currentIndex === 0;
    btnRight.disabled = currentIndex === sections.length - 1;
    btnUp.disabled = true;
    btnDown.disabled = true;
  }
}

function scrollToIndex(index) {
  // console.log(`ScrollToIndex called: index=${index}, isMobile=${isMobile}, currentIndex=${currentIndex}`);
  
  if (isMobile) {
    // Mobile : scroll vertical
    const height = window.visualViewport?.height || window.innerHeight;
const scrollY = index * height;
    // console.log(`Mobile scroll to Y: ${scrollY}`);
    container.scrollTo({ 
      top: scrollY, 
      behavior: "smooth" 
    });
  } else {
    // Desktop : scroll horizontal
    const scrollX = index * sectionWidth;
    // console.log(`Desktop scroll to X: ${scrollX}`);
    container.scrollTo({ 
      left: scrollX, 
      behavior: "smooth" 
    });
  }
  
  currentIndex = index;
  updateButtons();
}

// Fonction utilitaire pour les √©v√©nements tactiles
function addTouchSupport(element, callback) {
  // Support tactile
  element.addEventListener('touchstart', (e) => {
    e.preventDefault();
    callback();
  }, { passive: false });
  
  // Support souris (pour dev)
  element.addEventListener('click', callback);
}

// Remplacer les addEventListener existants par :
addTouchSupport(btnLeft, () => {
  if (!isMobile && currentIndex > 0) {
    scrollToIndex(currentIndex - 1);
  }
});

addTouchSupport(btnRight, () => {
  if (!isMobile && currentIndex < sections.length - 1) {
    scrollToIndex(currentIndex + 1);
  }
});

addTouchSupport(btnUp, () => {
  if (isMobile && currentIndex > 0) {
    scrollToIndex(currentIndex - 1);
  }
});

addTouchSupport(btnDown, () => {
  if (isMobile && currentIndex < sections.length - 1) {
    scrollToIndex(currentIndex + 1);
  }
});

// Support des touches fl√©ch√©es du clavier
document.addEventListener("keydown", (event) => {
  // V√©rifier si aucun champ de saisie n'est actif
  const activeElement = document.activeElement;
  const isInputFocused = activeElement && (
    activeElement.tagName === 'INPUT' || 
    activeElement.tagName === 'TEXTAREA' || 
    activeElement.contentEditable === 'true'
  );
  
  // Ne pas intercepter les touches si un champ de saisie est actif
  if (isInputFocused) return;
  
  if (isMobile) {
    // Mobile : seules les fl√®ches haut/bas pour les sections
    if (event.key === "ArrowUp" && currentIndex > 0) {
      event.preventDefault();
      scrollToIndex(currentIndex - 1);
    } else if (event.key === "ArrowDown" && currentIndex < sections.length - 1) {
      event.preventDefault();
      scrollToIndex(currentIndex + 1);
    }
  } else {
    // Desktop : fl√®ches gauche/droite pour les sections
    if (event.key === "ArrowLeft" && currentIndex > 0) {
      event.preventDefault();
      scrollToIndex(currentIndex - 1);
    } else if (event.key === "ArrowRight" && currentIndex < sections.length - 1) {
      event.preventDefault();
      scrollToIndex(currentIndex + 1);
    } else if (event.key === "ArrowUp" && currentIndex > 0) {
      event.preventDefault();
      scrollToIndex(currentIndex - 1);
    } else if (event.key === "ArrowDown" && currentIndex < sections.length - 1) {
      event.preventDefault();
      scrollToIndex(currentIndex + 1);
    }
  }
});

// Auto-calcule la section visible au scroll manuel
container.addEventListener("scroll", () => {
  let newIndex;
  if (isMobile) {
    const height = window.visualViewport?.height || window.innerHeight;
newIndex = Math.round(container.scrollTop / height);
    // console.log(`Mobile scroll detected: scrollTop=${container.scrollTop}, newIndex=${newIndex}`);
  } else {
    newIndex = Math.round(container.scrollLeft / sectionWidth);
    // console.log(`Desktop scroll detected: scrollLeft=${container.scrollLeft}, newIndex=${newIndex}`);
  }
  
  if (newIndex !== currentIndex && newIndex >= 0 && newIndex < sections.length) {
    currentIndex = newIndex;
    updateButtons();
  }
});

window.addEventListener("resize", () => {
  const newIsMobile = window.innerWidth <= 1024;
  if (newIsMobile !== isMobile) {
    isMobile = newIsMobile;  // Mettre √† jour la variable
    updateButtons();  // Recalculer les boutons actifs
  }
  
  // Valider et ajuster les dimensions des carrousels
  document.querySelectorAll('.carrousel-track').forEach(track => {
    const carousel = track.carousel;
    if (carousel) carousel.validateDimensions();
  });
  
  scrollToIndex(currentIndex);
});

// Initialisation
updateButtons();




//    ADAPTATION DES TEINTES DE HIGHLIGHT PAR SECTION AFFICHEE

// Associe chaque ID de section √† une couleur
const sectionColors = {
"projet-OffKey": "#dd1031", // rouge, "#aedfb3" cyan, "daff1c" citron
"projet-Stone-of-Amasha": "#ab8b69",  // sable, "#6d5452" violet chaud, "#a07a58" sable sombre, "#b69973" sable clair
"projet-Brique-Bloc": "#f9b32d", //jaune, "#005596" bleu, "#e94d1c"rouge
"projet-Affiches-Animees": "#b1dac8", // cyan, "#f9d738" orange, 
"projet-Vitrine": "#939997", //gris clair, "#3b3b39" gris fonc√©, "#938c82" gris sable
"projet-Oursins": "#004d76", //turquoise sombre, "#e00c1a" rouge, "#4b4b4e" gris chaud
"projet-Cimes": "#67792c",  //vert, "#4a582f" kaki terne, "#2a3725" vert sombre, "#42452c" kaki sombre
"projet-Kaleidoscope": "#41150a", //brun rouge, "#764218" brun dor√©, "#53110f" bordeau sombre
"projet-HAL9000": "#110F13", //noir riche, "#4f428a",  // violet, "#320d96" violet sombre, "#6328d0" violet p√©tard, "#f73d56" fuscia, "#d748e2" rose p√©tard, "#01c6e9" bleu p√©tard
"projet-Entre-et-tenir-pt1": "#FFFAF1", //blanc cr√®me, "#f8f8f1" cr√®me plus clair, "#575f30" vert terne, "#524f29" kaki, "#576051" turquoise sombre, "#83b8e4" bleu clair, "#cba689" rose sabl√©
"projet-Entre-et-tenir-pt2":  "#C7CEE8", //gris lavand√©, "#6c635b" gris, "#464646" blender, "#3a2c22" marron sombre, "#4f3c2b" marron, "#79634f" marron clair, 
"projet-Memoire": "#ffb47e", //"#e9e4d8", // oeuf, "#ffb47e" orange, "#d8b1ed" lavande, "#faadde" rose, "#004b81" bleu, "#274e12" vert
"projet-Phytomorphose": "e4e0dd", //blanc cr√®me gris, "#606062" gris violet, "#7fa1a3"turquoise, "#514b45" gris chaud sombre, "#7c7066" gris chaud clair, "#a4947b" sable
"projet-Just-Click": "#ef3407", //rouge, "#06a7ef" bleu, "#63503f" marron, "ffe4c9" beige
"projet-Catalogue-bouees": "#F6D74D", // jaune plus p√©tard, "#d0b03f" jaune, "#272763" bleu, "#b71d1b"rouge
};


// Fonction appel√©e √† chaque changement de visibilit√©
function handleIntersection(entries) {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const sectionId = entry.target.id;
      const color = sectionColors[sectionId];

      if (color) {
        document.documentElement.style.setProperty('--highlight-color', color);
      }
    }
  });
}

// Cr√©e l'observer
const observer = new IntersectionObserver(handleIntersection, {
  root: document.querySelector('#container-projets'), // scrolling container
  rootMargin: '0px',
  threshold: 0.6, // 60% visible dans le viewport
});

// Observe chaque section
sections.forEach(section => observer.observe(section));


//    CARROUSEL INFINI DES IMG
const highResMapping = {
  'asset/img/low/amasha_1.jpg': 'asset/img/high/amasha_1.jpg',
  'asset/img/low/amasha_2.jpg': 'asset/img/high/amasha_2.jpg',
  'asset/img/low/amasha_3.jpg': 'asset/img/high/amasha_3.jpg',
  'asset/img/low/amasha_4.jpg': 'asset/img/high/amasha_4.jpg',
  'asset/img/low/amasha_5.jpg': 'asset/img/high/amasha_5.jpg',
  'asset/img/low/amasha_6.jpg': 'asset/img/high/amasha_6.jpg',
  'asset/img/low/amasha_7.jpg': 'asset/img/high/amasha_7.jpg',
  'asset/img/low/amasha_8.jpg': 'asset/img/high/amasha_8.jpg',

  'asset/img/low/brique-bloc_1.jpg': 'asset/img/high/brique-bloc_1.jpg',
  'asset/img/low/brique-bloc_2.jpg': 'asset/img/high/brique-bloc_2.jpg',
  'asset/img/low/brique-bloc_3.jpg': 'asset/img/high/brique-bloc_3.jpg',
  'asset/img/low/brique-bloc_4.jpg': 'asset/img/high/brique-bloc_4.jpg',
  'asset/img/low/brique-bloc_5.jpg': 'asset/img/high/brique-bloc_5.jpg',

  'asset/img/low/catalogue-bouees_1.jpg': 'asset/img/high/catalogue-bouees_1.jpg',
  'asset/img/low/catalogue-bouees_2.jpg': 'asset/img/high/catalogue-bouees_2.jpg',
  'asset/img/low/catalogue-bouees_3.jpg': 'asset/img/high/catalogue-bouees_3.jpg',
  'asset/img/low/catalogue-bouees_4.jpg': 'asset/img/high/catalogue-bouees_4.jpg',
  'asset/img/low/catalogue-bouees_5.jpg': 'asset/img/high/catalogue-bouees_5.jpg',
  'asset/img/low/catalogue-bouees_6.jpg': 'asset/img/high/catalogue-bouees_6.jpg',
  'asset/img/low/catalogue-bouees_7.jpg': 'asset/img/high/catalogue-bouees_7.jpg',
  'asset/img/low/catalogue-bouees_8.jpg': 'asset/img/high/catalogue-bouees_8.jpg',
  'asset/img/low/catalogue-bouees_9.jpg': 'asset/img/high/catalogue-bouees_9.jpg',

  'asset/img/low/cimes_1.jpg': 'asset/img/high/cimes_1.jpg',
  'asset/img/low/cimes_2.jpg': 'asset/img/high/cimes_2.jpg',
  'asset/img/low/cimes_3.jpg': 'asset/img/high/cimes_3.jpg',
  'asset/img/low/cimes_4.jpg': 'asset/img/high/cimes_4.jpg',
  'asset/img/low/cimes_5.jpg': 'asset/img/high/cimes_5.jpg',
  'asset/img/low/cimes_6.jpg': 'asset/img/high/cimes_6.jpg',
  'asset/img/low/cimes_7.jpg': 'asset/img/high/cimes_7.jpg',
  'asset/img/low/cimes_8.jpg': 'asset/img/high/cimes_8.jpg',
  'asset/img/low/cimes_9.jpg': 'asset/img/high/cimes_9.jpg',

  'asset/img/low/entre-et-tenir_1.jpg': 'asset/img/high/entre-et-tenir_1.jpg',
  'asset/img/low/entre-et-tenir_2.jpg': 'asset/img/high/entre-et-tenir_2.jpg',
  'asset/img/low/entre-et-tenir_3.jpg': 'asset/img/high/entre-et-tenir_3.jpg',
  'asset/img/low/entre-et-tenir_4.jpg': 'asset/img/high/entre-et-tenir_4.jpg',
  'asset/img/low/entre-et-tenir_5.jpg': 'asset/img/high/entre-et-tenir_5.jpg',
  'asset/img/low/entre-et-tenir_6.jpg': 'asset/img/high/entre-et-tenir_6.jpg',
  'asset/img/low/entre-et-tenir_7.jpg': 'asset/img/high/entre-et-tenir_7.jpg',
  'asset/img/low/entre-et-tenir_8.jpg': 'asset/img/high/entre-et-tenir_8.jpg',

  'asset/img/low/entre-et-tenir-2_1.jpg': 'asset/img/high/entre-et-tenir-2_1.jpg',
  'asset/img/low/entre-et-tenir-2_2.jpg': 'asset/img/high/entre-et-tenir-2_2.jpg',

  'asset/img/low/hack_1.jpg': 'asset/img/high/hack_1.jpg',
  'asset/img/low/hack_2.jpg': 'asset/img/high/hack_2.jpg',
  'asset/img/low/hack_3.jpg': 'asset/img/high/hack_3.jpg',

  'asset/img/high/HAL9000-screen_1.jpg': 'asset/img/low/HAL9000-screen_1.jpg',
  'asset/img/low/HAL9000-screen_2.jpg': 'asset/img/high/HAL9000-screen_2.jpg',
  'asset/img/low/HAL9000-screen_3.jpg': 'asset/img/high/HAL9000-screen_3.jpg',
  'asset/img/low/HAL9000-screen_4.jpg': 'asset/img/high/HAL9000-screen_4.jpg',
  'asset/img/low/HAL9000-screen_5.jpg': 'asset/img/high/HAL9000-screen_5.jpg',
  'asset/img/low/HAL9000_1.jpg': 'asset/img/high/HAL9000_1.jpg',
  'asset/img/low/HAL9000_2.jpg': 'asset/img/high/HAL9000_2.jpg',
  'asset/img/low/HAL9000_3.jpg': 'asset/img/high/HAL9000_3.jpg',
  'asset/img/low/HAL9000_4.jpg': 'asset/img/high/HAL9000_4.jpg',
  'asset/img/low/HAL9000_5.jpg': 'asset/img/high/HAL9000_5.jpg',

  'asset/img/low/just-click_1.jpg': 'asset/img/high/just-click_1.jpg',
  'asset/img/low/just-click_2.jpg': 'asset/img/high/just-click_2.jpg',
  'asset/img/low/just-click_3.jpg': 'asset/img/high/just-click_3.jpg',
  'asset/img/low/just-click_4.jpg': 'asset/img/high/just-click_4.jpg',

  'asset/img/low/kaleidoscope_1.jpg': 'asset/img/high/kaleidoscope_1.jpg',
  'asset/img/low/kaleidoscope_2.jpg': 'asset/img/high/kaleidoscope_2.jpg',
  'asset/img/low/kaleidoscope_3.jpg': 'asset/img/high/kaleidoscope_3.jpg',
  'asset/img/low/kaleidoscope_4.jpg': 'asset/img/high/kaleidoscope_4.jpg',
  'asset/img/low/kaleidoscope_5.jpg': 'asset/img/high/kaleidoscope_5.jpg',
  'asset/img/low/kaleidoscope_6.jpg': 'asset/img/high/kaleidoscope_6.jpg',
  'asset/img/low/kaleidoscope-zoom_1.jpg': 'asset/img/high/kaleidoscope-zoom_1.jpg',
  'asset/img/low/kaleidoscope-zoom_2.jpg': 'asset/img/high/kaleidoscope-zoom_2.jpg',
  'asset/img/low/kaleidoscope-zoom_3.jpg': 'asset/img/high/kaleidoscope-zoom_3.jpg',
  'asset/img/low/kaleidoscope-zoom_4.jpg': 'asset/img/high/kaleidoscope-zoom_4.jpg',

  'asset/img/low/memoire_1.jpg': 'asset/img/high/memoire_1.jpg',
  'asset/img/low/memoire_2.jpg': 'asset/img/high/memoire_2.jpg',
  'asset/img/low/memoire_3.jpg': 'asset/img/high/memoire_3.jpg',
  'asset/img/low/memoire_4.jpg': 'asset/img/high/memoire_4.jpg',
  'asset/img/low/memoire_5.jpg': 'asset/img/high/memoire_5.jpg',
  'asset/img/low/memoire_6.jpg': 'asset/img/high/memoire_6.jpg',
  'asset/img/low/memoire_7.jpg': 'asset/img/high/memoire_7.jpg',

  'asset/img/low/offkey_1.jpg': 'asset/img/high/offkey_1.jpg',
  'asset/img/low/offkey_2.jpg': 'asset/img/high/offkey_2.jpg',
  'asset/img/low/offkey_3.jpg': 'asset/img/high/offkey_3.jpg',
  'asset/img/low/offkey_4.jpg': 'asset/img/high/offkey_4.jpg',
  'asset/img/low/offkey_5.jpg': 'asset/img/high/offkey_5.jpg',
  'asset/img/low/offkey_6.jpg': 'asset/img/high/offkey_6.jpg',
  'asset/img/low/offkey_7.jpg': 'asset/img/high/offkey_7.jpg',
  'asset/img/low/offkey_8.jpg': 'asset/img/high/offkey_8.jpg',
  'asset/img/low/offkey_9.jpg': 'asset/img/high/offkey_9.jpg',

  'asset/img/low/oursins_1.jpg': 'asset/img/high/oursins_1.jpg',
  'asset/img/low/oursins_2.jpg': 'asset/img/high/oursins_2.jpg',
  'asset/img/low/oursins_3.jpg': 'asset/img/high/oursins_3.jpg',
  'asset/img/low/oursins_4.jpg': 'asset/img/high/oursins_4.jpg',
  'asset/img/low/oursins_5.jpg': 'asset/img/high/oursins_5.jpg',
  'asset/img/low/oursins_6.jpg': 'asset/img/high/oursins_6.jpg',
  'asset/img/low/oursins-edition_1.jpg': 'asset/img/high/oursins-edition_1.jpg',
  'asset/img/low/oursins-edition_2.jpg': 'asset/img/high/oursins-edition_2.jpg',
  'asset/img/low/oursins-edition_3.jpg': 'asset/img/high/oursins-edition_3.jpg',
  'asset/img/low/oursins-edition_4.jpg': 'asset/img/high/oursins-edition_4.jpg',
  'asset/img/low/oursins-edition_5.jpg': 'asset/img/high/oursins-edition_5.jpg',
  'asset/img/low/oursins-edition_6.jpg': 'asset/img/high/oursins-edition_6.jpg',

  'asset/img/low/phytom_1.jpg': 'asset/img/high/phytom_1.jpg',
  'asset/img/low/phytom_2.jpg': 'asset/img/high/phytom_2.jpg',
  'asset/img/low/phytom_3.jpg': 'asset/img/high/phytom_3.jpg',
  'asset/img/low/phytom_4.jpg': 'asset/img/high/phytom_4.jpg',
  'asset/img/low/phytom_5.jpg': 'asset/img/high/phytom_5.jpg',
  'asset/img/low/phytom_6.jpg': 'asset/img/high/phytom_6.jpg',

  'asset/img/low/tissage_1.jpg': 'asset/img/high/tissage_1.jpg',
  'asset/img/low/tissage_2.jpg': 'asset/img/high/tissage_2.jpg',
  'asset/img/low/tissage_3.jpg': 'asset/img/high/tissage_3.jpg',
  'asset/img/low/tissage_4.jpg': 'asset/img/high/tissage_4.jpg',

  'asset/img/low/vitrine_1.jpg': 'asset/img/high/vitrine_1.jpg',
  'asset/img/low/vitrine_2.jpg': 'asset/img/high/vitrine_2.jpg',
  'asset/img/low/vitrine_3.jpg': 'asset/img/high/vitrine_3.jpg',
  'asset/img/low/vitrine_4.jpg': 'asset/img/high/vitrine_4.jpg',
  'asset/img/low/vitrine_5.jpg': 'asset/img/high/vitrine_5.jpg',
  'asset/img/low/vitrine_6.jpg': 'asset/img/high/vitrine_6.jpg',
  'asset/img/low/vitrine_7.jpg': 'asset/img/high/vitrine_7.jpg',
  'asset/img/low/vitrine_8.jpg': 'asset/img/high/vitrine_8.jpg',

  //mapping des thumbnails :
  'asset/img/low/hack-thumbnail_1.jpg': 'asset/img/high/hack-thumbnail_1.jpg',
  'asset/img/low/hack-thumbnail_2.jpg': 'asset/img/high/hack-thumbnail_2.jpg',
  'asset/img/low/hack-thumbnail_3.jpg': 'asset/img/high/hack-thumbnail_3.jpg',
  'asset/img/low/HAL9000-thumbnail_1.jpg': 'asset/img/high/HAL9000-thumbnail_1.jpg',
  'asset/img/low/HAL9000-thumbnail_2.jpg': 'asset/img/high/HAL9000-thumbnail_2.jpg',
  'asset/img/low/HAL9000-thumbnail_3.jpg': 'asset/img/high/HAL9000-thumbnail_3.jpg',
  'asset/img/low/HAL9000-thumbnail_4.jpg': 'asset/img/high/HAL9000-thumbnail_4.jpg',
  'asset/img/low/offkey_1-thumbnail.jpg': 'asset/img/high/offkey_1-thumbnail.jpg',
  'asset/img/low/HAL9000-thumbnail_4.jpg': 'asset/img/high/HAL9000-thumbnail_4.jpg',

  //mapping des contenus multim√©dia autre

  'asset/img/low/offkey_1-thumbnail.jpg': 'asset/media/offkey-vid_1.mp4',
  'asset/img/low/hack_1.jpg': 'asset/media/hack-vid_1.mp4',
  'asset/img/low/hack_1.jpg': 'asset/media/hack-vid_2.mp4',
  'asset/img/low/hack_1.jpg': 'asset/media/hack-vid_3.mp4',
  'asset/img/low/HAL9000-screen_1.jpg': 'asset/media/audio-1_pride.mp3',
  'asset/img/low/HAL9000-screen_1.jpg': 'asset/media/audio-2_doubt.mp3',
  'asset/img/low/HAL9000-screen_1.jpg': 'asset/media/audio-3_disdain.mp3',
  'asset/img/low/HAL9000-screen_1.jpg': 'asset/media/audio-4_fear.mp3',
  'asset/img/low/just-click_3-thumbnail.jpg': 'https://agth3.github.io/just-click/',
};

function getHighResVersion(lowResSrc) {
  return highResMapping[lowResSrc] || lowResSrc;
}

class VerticalCarousel {
  constructor(trackElement) {
    this.track = trackElement;
    this.slides = Array.from(trackElement.querySelectorAll('.carrousel-slide'));
    this.isMobile = window.innerWidth <= 1024;
    
    // V√©rification de la structure
    // console.log(`Carousel init: total slides=${this.slides.length}, isMobile=${this.isMobile}`);
    
    // Seuils adaptatifs selon le device
    this.scrollThreshold = this.isMobile ? 20 : 30; // Plus sensible sur mobile
    this.maxScrollDistance = this.isMobile ? 4 : 3; // Plus de distance possible sur mobile

    // Adaptation mobile/desktop
    if (this.isMobile) {
      this.slideWidth = window.innerWidth - 2 * (window.innerWidth * 0.095); // Mobile: largeur - marges
      this.slideHeight = null; // Non utilis√© en mobile
    } else {
      this.slideHeight = window.innerHeight - 2 * this.getVh(16.667); // Desktop: hauteur - marges
      this.slideWidth = null; // Non utilis√© en desktop
    }
    
    this.originalSlideCount = this.slides.length - 2; // Les 2 clones
  this.totalSlides = this.slides.length;
  
  // console.log(`Slides count: original=${this.originalSlideCount}, total=${this.totalSlides}`);
 
    this.currentIndex = 2;
    this.isScrolling = false;
    this.scrollThreshold = 30;
    this.scrollAccumulator = 0;
    this.maxScrollDistance = 3;
    this.preloadedImages = new Map();

    this.loadedMedia = new Set(); // Tracker les m√©dias d√©j√† charg√©s
    this.preloadedImages = new Map();

    this.initWithRealFirstImage();
    this.bindEvents();
    this.updateImageQuality();

    // AJOUTER √† la fin du constructeur
  console.log('Carousel initialized:', {
    slides: this.slides.length,
    isMobile: this.isMobile,
    currentIndex: this.currentIndex
  });
  
  // Debug apr√®s 1 seconde
  setTimeout(() => this.debugCarouselState(), 1000);
  }

  isCarouselSectionVisible() {
    const section = this.track.closest('.grid-projets');
    if (!section) return false;
    
    const rect = section.getBoundingClientRect();
    const viewportHeight = window.innerHeight;
    const viewportWidth = window.innerWidth;
    
    // Une section est consid√©r√©e comme visible si elle occupe au moins 60% du viewport
    if (window.innerWidth <= 1024) {
      // Mobile : v√©rification verticale
      return rect.top < viewportHeight * 0.4 && rect.bottom > viewportHeight * 0.6;
    } else {
      // Desktop : v√©rification horizontale
      return rect.left < viewportWidth * 0.4 && rect.right > viewportWidth * 0.6;
    }
  }

  validateDimensions() {
  if (this.isMobile) {
    // Recalculer slideWidth si n√©cessaire
    const calculatedWidth = window.innerWidth - 2 * (window.innerWidth * 0.095);
    if (Math.abs(this.slideWidth - calculatedWidth) > 5) {
      this.slideWidth = calculatedWidth;
      this.initWithRealFirstImage(); // Repositionner
    }
  }
}

  preloadHighResImage(highResSrc) {
    if (this.preloadedImages.has(highResSrc)) return Promise.resolve(highResSrc);
    
    return new Promise((resolve, reject) => {
      const img = new Image();
      img.onload = () => {
        this.preloadedImages.set(highResSrc, highResSrc);
        resolve(highResSrc);
      };
      img.onerror = reject;
      img.src = highResSrc;
    });
  }

  //M√©thodes pour les m√©dia autres

 createMediaElement(slide, mediaSrc, mediaType) {
  // MODIFI√â : V√©rifier plus strictement l'existence du m√©dia
  const existingMedia = slide.querySelector('video, audio, iframe, .audio-container');
  if (existingMedia) {
    console.log('Media already exists, returning existing element');
    return existingMedia;
  }

  let mediaElement;

  switch (mediaType) {
    case 'video':
      mediaElement = document.createElement('video');
      mediaElement.src = mediaSrc;
      mediaElement.controls = true;
      
      // MODIFICATION : Attributs pour simplifier les contr√¥les
      mediaElement.controlsList = 'nodownload noplaybackrate nopictureinpicture';
      mediaElement.disablePictureInPicture = true;
      
      mediaElement.muted = false;
      mediaElement.loop = true;
      mediaElement.playsInline = true;
      mediaElement.preload = 'metadata';
      mediaElement.style.display = 'block';
      mediaElement.style.position = 'relative';
      break;

    case 'audio':
      const audioContainer = document.createElement('div');
      audioContainer.className = 'audio-container';
      
      // CORRECTION : Appliquer TOUS les styles CSS n√©cessaires en JavaScript, par ce que sinon ils sont ignor√©s
      audioContainer.style.position = 'absolute';
      audioContainer.style.top = '0';
      audioContainer.style.left = '0';
      audioContainer.style.width = '100%';
      audioContainer.style.height = '100%';
      audioContainer.style.display = 'flex';
      audioContainer.style.flexDirection = 'column';
      audioContainer.style.justifyContent = 'center';
      audioContainer.style.alignItems = 'flex-end';
      // audioContainer.style.backgroundColor = '#0f0c0c';
      audioContainer.style.zIndex = '5';
      audioContainer.style.pointerEvents = 'auto';

      mediaElement = document.createElement('audio');
      mediaElement.src = mediaSrc;
      mediaElement.controls = true;
      // MODIFICATION : Attributs pour simplifier les contr√¥les audio
      mediaElement.controlsList = 'nodownload noplaybackrate';
      mediaElement.preload = 'metadata';
      
      // Styles pour l'√©l√©ment audio lui-m√™me
      // mediaElement.style.width = '80%';
      // mediaElement.style.maxWidth = '400px';
    
      // mediaElement.style.margin = '0';
      // mediaElement.style.filter = 'sepia(1) saturate(2) hue-rotate(0deg)';
      // mediaElement.style.position = 'relative';

      audioContainer.appendChild(mediaElement);
      return audioContainer;

    case 'iframe':
      mediaElement = document.createElement('iframe');
      mediaElement.src = mediaSrc;
      mediaElement.sandbox = 'allow-scripts allow-same-origin allow-popups';
      mediaElement.loading = 'lazy';
      mediaElement.style.position = 'absolute';
      // mediaElement.style.top = '0';
      mediaElement.style.left = '0';
      break;

    default:
      return null;
  }

  // Protection contre le t√©l√©chargement via clic droit ou drag
  mediaElement.addEventListener('contextmenu', (e) => e.preventDefault());
  mediaElement.addEventListener('dragstart', (e) => e.preventDefault());

  return mediaElement;
}
// Modifier votre m√©thode toggleMediaVisibility existante

toggleMediaVisibility(slide, index, shouldShow) {
  const mediaType = slide.dataset.mediaType;
  if (!mediaType || mediaType === 'image') return;
  
  const existingMedia = slide.querySelector('video, audio, iframe, .audio-container');
  const placeholder = slide.querySelector('.media-placeholder');
  
  // V√©rifier si la section du carrousel est visible
  const isSectionVisible = this.isCarouselSectionVisible();
  
  if (shouldShow && isSectionVisible) {
    // Afficher le m√©dia s'il existe, sinon le charger
    if (existingMedia) {
      if (mediaType === 'iframe') {
        slide.classList.add('iframe-loaded');
      } else {
        existingMedia.style.display = 'block';
        
        // CORRECTION : R√©appliquer explicitement les styles pour les conteneurs audio
        if (mediaType === 'audio') {
          const audioContainer = existingMedia.classList.contains('audio-container') ? 
            existingMedia : existingMedia.closest('.audio-container');
          
          if (audioContainer) {
            // Force le repositionnement correct du conteneur
            audioContainer.style.position = 'absolute';
            audioContainer.style.top = '0';
            audioContainer.style.left = '0';
            audioContainer.style.width = '100%';
            audioContainer.style.height = '100%';
            audioContainer.style.display = 'flex';
            audioContainer.style.flexDirection = 'column';
            audioContainer.style.justifyContent = 'center';
            audioContainer.style.alignItems = 'flex-end';
            // audioContainer.style.backgroundColor = '#0f0c0c';
            audioContainer.style.zIndex = '5';
            audioContainer.style.pointerEvents = 'auto';
          }
        }
        
        placeholder.style.display = 'none';
      }
      
      // Auto-play pour les vid√©os SEULEMENT si section visible
      if (mediaType === 'video') {
        const video = existingMedia.tagName === 'VIDEO' ? existingMedia : existingMedia.querySelector('video');
        if (video) {
          video.currentTime = 0;
          video.play().catch(() => {});
        }
      }
    } else {
      // Charger le m√©dia si pas encore fait
      this.loadMediaContent(slide, index);
    }
    
  } else {
    // Cacher le m√©dia, montrer le placeholder
    if (existingMedia) {
      if (mediaType === 'iframe') {
        slide.classList.remove('iframe-loaded');
      } else {
        existingMedia.style.display = 'none';
      }
      
      // Pause les m√©dias
      if (mediaType === 'video') {
        const video = existingMedia.tagName === 'VIDEO' ? existingMedia : existingMedia.querySelector('video');
        if (video && !video.paused) {
          video.pause();
        }
      } else if (mediaType === 'audio') {
        const audio = existingMedia.tagName === 'AUDIO' ? existingMedia : existingMedia.querySelector('audio');
        if (audio && !audio.paused) {
          audio.pause();
        }
      }
    }
    if (placeholder && mediaType !== 'iframe') {
      placeholder.style.display = 'block';
    }
  }
}

calculateScrollDistance(wheelCount, totalDelta, isTrackpad) {
  if (this.isMobile) {
    if (isTrackpad) {
      if (totalDelta < 200) return 1;
      else if (totalDelta < 600) return 2;
      else return 3;
    } else {
      if (totalDelta < 150) return 1;
      else if (totalDelta < 400) return 2;
      else return 3;
    }
  } else {
    if (isTrackpad) {
      if (totalDelta < 300) return 1;
      else if (totalDelta < 800) return 1;
      else if (totalDelta < 1800) return 2;
      else return 3;
    } else {
      if (wheelCount === 1) return 1;
      else if (wheelCount <= 3) return 2;
      else return 3;
    }
  }
}

calculateTouchDistance(velocity, distance) {
  if (this.isMobile) {
    if (velocity > 1.5) {
      if (distance > 200) return 3;
      else if (distance > 100) return 2;
      else return 1;
    } else if (velocity > 0.8) {
      if (distance > 150) return 2;
      else return 1;
    } else {
      if (distance > 300) return 2;
      else return 1;
    }
  } else {
    return distance > 200 ? 2 : 1;
  }
}


// Gestion sp√©ciale pour l'iframe unique
loadMediaContent(slide, index) {
  const mediaType = slide.dataset.mediaType;
  const placeholder = slide.querySelector('.media-placeholder');
  
  if (!placeholder || !mediaType || mediaType === 'image') return;
  
  // Cr√©er un ID unique pour ce m√©dia
  const mediaId = `${slide.dataset.videoSrc || slide.dataset.audioSrc || slide.dataset.iframeSrc}_${index}`;
  
  // Si d√©j√† charg√©, juste l'afficher
  if (this.loadedMedia.has(mediaId)) {
    const existingMedia = slide.querySelector('video, audio, iframe, .audio-container');
    const placeholder = slide.querySelector('.media-placeholder');
    
    if (existingMedia && placeholder) {
      if (mediaType === 'iframe') {
        // Gestion sp√©ciale iframe
        slide.classList.add('iframe-loaded');
      } else {
        placeholder.style.display = 'none';
        existingMedia.style.display = 'block';
      }
      
      // Auto-play pour les vid√©os SEULEMENT si section ET slide en focus
      if (mediaType === 'video' && index === this.currentIndex && this.isCarouselSectionVisible()) {
        const video = existingMedia.tagName === 'VIDEO' ? existingMedia : existingMedia.querySelector('video');
        if (video) {
          video.currentTime = 0;
          video.play().catch(() => {});
        }
      }
    }
    return;
  }
  
  // Si pas encore charg√©, charger une seule fois
  slide.classList.add('media-loading');
  
  let mediaSrc;
  switch (mediaType) {
    case 'video':
      mediaSrc = slide.dataset.videoSrc;
      break;
    case 'audio':
      mediaSrc = slide.dataset.audioSrc;
      break;
    case 'iframe':
      mediaSrc = slide.dataset.iframeSrc;
      break;
  }
  
  if (!mediaSrc) return;
  
  const mediaElement = this.createMediaElement(slide, mediaSrc, mediaType);
  if (!mediaElement) return;
  
  // Gestion du chargement selon le type
  // Dans la partie handleLoad de loadMediaContent, remplacer par :
  const handleLoad = () => {
    slide.classList.remove('media-loading');
    
    // MODIFI√â : V√©rifier qu'on n'ajoute pas un doublon
    const alreadyExists = slide.querySelector('video, audio, iframe, .audio-container');
    if (alreadyExists && alreadyExists !== mediaElement) {
      console.log('Media element already exists, not adding duplicate');
      return;
    }
    
    if (mediaType === 'iframe') {
      // Gestion sp√©ciale iframe avec transition
      if (!slide.contains(mediaElement)) {
        slide.appendChild(mediaElement);
      }
      setTimeout(() => {
        slide.classList.add('iframe-loaded');
      }, 100);
    } else {
      placeholder.style.display = 'none';
      if (!slide.contains(mediaElement)) {
        slide.appendChild(mediaElement);
      }
    }
    
    // Marquer comme charg√©
    this.loadedMedia.add(mediaId);
    
    // Auto-play SEULEMENT si section ET slide en focus
    if (mediaType === 'video' && index === this.currentIndex && this.isCarouselSectionVisible()) {
      const video = mediaElement.tagName === 'VIDEO' ? mediaElement : mediaElement.querySelector('video');
      if (video) {
        video.play().catch(() => {});
      }
    }
  };
  
  const handleError = () => {
    slide.classList.remove('media-loading');
    console.warn(`Erreur de chargement pour ${mediaType}: ${mediaSrc}`);
  };
  
  if (mediaType === 'video') {
    mediaElement.addEventListener('loadeddata', handleLoad, { once: true });
    mediaElement.addEventListener('error', handleError, { once: true });
  } else if (mediaType === 'audio') {
    const audio = mediaElement.querySelector ? mediaElement.querySelector('audio') : mediaElement;
    audio.addEventListener('loadedmetadata', handleLoad, { once: true });
    audio.addEventListener('error', handleError, { once: true });
  } else if (mediaType === 'iframe') {
    // Pour iframe, timeout de s√©curit√© plus long
    let loaded = false;
    const timeoutId = setTimeout(() => {
      if (!loaded) {
        loaded = true;
        handleLoad();
      }
    }, 8000); // 8 secondes de timeout
    
    mediaElement.addEventListener('load', () => {
      if (!loaded) {
        loaded = true;
        clearTimeout(timeoutId);
        handleLoad();
      }
    }, { once: true });
    
    mediaElement.addEventListener('error', () => {
      clearTimeout(timeoutId);
      handleError();
    }, { once: true });
  }
}


pauseAllMedia() {
  this.slides.forEach(slide => {
    const video = slide.querySelector('video');
    const audio = slide.querySelector('audio');
    
    if (video && !video.paused) {
      video.pause();
    }
    if (audio && !audio.paused) {
      audio.pause();
    }
  });
}

preloadAndSizeImage(img, lowResSrc) {
  const highResSrc = getHighResVersion(lowResSrc);
  
  // Si pas de version haute r√©solution, rien √† faire
  if (highResSrc === lowResSrc) return Promise.resolve();
  
  return new Promise((resolve) => {
    // Cr√©er une image temporaire pour obtenir les dimensions de la version haute r√©solution
    const tempImg = new Image();
    
    tempImg.onload = () => {
      // Appliquer les dimensions de la version haute r√©solution √† l'image actuelle
      img.style.width = `${tempImg.naturalWidth}px`;
      img.style.height = `${tempImg.naturalHeight}px`;
      img.style.maxWidth = '100%';
      img.style.maxHeight = '100%';
      img.style.objectFit = 'contain';
      
      // Stocker les dimensions pour √©viter de les recalculer
      img.dataset.naturalWidth = tempImg.naturalWidth;
      img.dataset.naturalHeight = tempImg.naturalHeight;
      
      resolve();
    };
    
    tempImg.onerror = () => {
      // Si erreur de chargement, utiliser les dimensions actuelles
      resolve();
    };
    
    // Charger la version haute r√©solution pour obtenir ses dimensions
    tempImg.src = highResSrc;
  });
}


updateImageQuality() {
  // Pause tous les m√©dias d'abord
  this.pauseAllMedia();
  
  this.slides.forEach((slide, index) => {
    const img = slide.querySelector('img:not(.media-placeholder)');
    const placeholder = slide.querySelector('.media-placeholder');
    const mediaType = slide.dataset.mediaType;
    
    // R√©initialiser les classes
    slide.classList.remove('is-focus', 'is-prev', 'is-next', 'media-interactive');
    if (index === this.currentIndex) {
      slide.classList.add('is-focus');
      // Ajouter la classe interactive pour les m√©dias en focus
      if (mediaType && mediaType !== 'image') {
        slide.classList.add('media-interactive');
      }
    } else if (index === this.currentIndex - 1) {
      slide.classList.add('is-prev');
    } else if (index === this.currentIndex + 1) {
      slide.classList.add('is-next');
    }

    // AJOUT : Traitement sp√©cial pour les placeholders de m√©dias sur mobile
    if (this.isMobile && placeholder && mediaType && mediaType !== 'image') {
      const currentSrc = placeholder.getAttribute('src');
      // Pr√©-sizer le placeholder avec les dimensions de la version haute r√©solution
      if (!placeholder.dataset.sized) {
        this.preloadAndSizeImage(placeholder, currentSrc).then(() => {
          placeholder.dataset.sized = 'true';
        });
      }
    }

    if (index === this.currentIndex) {
      // Focus frame - afficher le contenu
      if (mediaType && mediaType !== 'image') {
        this.toggleMediaVisibility(slide, index, true);
      } else if (img) {
        // Logique existante pour les images + pr√©-sizing
        const currentLowResSrc = img.getAttribute('src');
        
        // AJOUT : Pr√©-sizer l'image avant le switch si n√©cessaire
        if (this.isMobile && !img.dataset.sized) {
          this.preloadAndSizeImage(img, currentLowResSrc).then(() => {
            img.dataset.sized = 'true';
          });
        }
        
        const highResSrc = getHighResVersion(currentLowResSrc);
        if (highResSrc !== currentLowResSrc) {
          this.preloadHighResImage(highResSrc).then(() => {
            if (index === this.currentIndex) {
              img.src = highResSrc;
            }
          }).catch(() => {
            img.src = currentLowResSrc;
          });
        }
      }
    } else {
      // Previous/next frames - cacher les m√©dias, montrer les placeholders
      if (mediaType && mediaType !== 'image') {
        this.toggleMediaVisibility(slide, index, false);
      } else if (img) {
        // Logique existante pour les images + pr√©-sizing
        const currentLowResSrc = img.getAttribute('src');
        const lowResSrc = Object.keys(highResMapping).find(key => 
          getHighResVersion(key) === currentLowResSrc
        ) || currentLowResSrc;
        
        // AJOUT : Pr√©-sizer l'image avant le switch si n√©cessaire
        if (this.isMobile && !img.dataset.sized) {
          this.preloadAndSizeImage(img, lowResSrc).then(() => {
            img.dataset.sized = 'true';
          });
        }
        
        img.src = lowResSrc;
      }
    }
  });
}


preloadAdjacentImages() {
  // Pr√©charger UNIQUEMENT la high-res de l'image suivante probable
  const nextIndex = this.currentIndex + 1;
  
  if (nextIndex >= 0 && nextIndex < this.slides.length) {
    const slide = this.slides[nextIndex];
    const img = slide.querySelector('img');
    if (img) {
      const lowResSrc = img.src;
      const highResSrc = getHighResVersion(lowResSrc);
      if (highResSrc !== lowResSrc && !this.preloadedImages.has(highResSrc)) {
        // Pr√©charger discr√®tement SANS changer le src
        this.preloadHighResImage(highResSrc).catch(() => {});
      }
    }
  }
}

  getVh(vh) {
  const height = window.visualViewport?.height || window.innerHeight; //deuxi√®me m√©thode pour les vieux navigateurs
  return height * (vh / 100);
}

initWithRealFirstImage() {
  this.currentIndex = 1; // Vraie premi√®re image
  
  if (this.isMobile) {
    // Mobile : positionnement horizontal
    const focusFrameLeft = window.innerWidth * 0.095;
    const gap = window.innerWidth * 0.04;
    const slideWithGap = this.slideWidth + gap;
    const targetPosition = focusFrameLeft - (this.currentIndex * slideWithGap);
    
    this.track.style.transform = `translateX(${targetPosition}px)`;
  } else {
    // Desktop : positionnement vertical
    const focusFrameOffset = this.getVh(16.667);
    const gap = this.getVh(4.63);
    const slideWithGap = this.slideHeight + gap;
    const targetPosition = focusFrameOffset - (this.currentIndex * slideWithGap);
    
    this.track.style.transform = `translateY(${targetPosition}px)`;
  }
  
  // AJOUT : Pr√©-sizing initial pour mobile
  if (this.isMobile) {
    this.slides.forEach((slide) => {
      const img = slide.querySelector('img');
      const placeholder = slide.querySelector('.media-placeholder');
      
      if (img && !img.dataset.sized) {
        const currentSrc = img.getAttribute('src');
        this.preloadAndSizeImage(img, currentSrc).then(() => {
          img.dataset.sized = 'true';
        });
      }
      
      if (placeholder && !placeholder.dataset.sized) {
        const currentSrc = placeholder.getAttribute('src');
        this.preloadAndSizeImage(placeholder, currentSrc).then(() => {
          placeholder.dataset.sized = 'true';
        });
      }
    });
  }
  
  this.updateScrollIndicator();
  this.updateImageQuality();
  
  setTimeout(() => this.preloadAdjacentImages(), 100);
}

isValidMove(direction, distance = 1) {
  const nextIndex = this.currentIndex + (direction * distance);
  // Permettre tous les mouvements dans la plage des indices (y compris les clones)
  const isValid = nextIndex >= 0 && nextIndex < this.totalSlides;
  // console.log(`Validating move: current=${this.currentIndex}, direction=${direction}, distance=${distance}, next=${nextIndex}, valid=${isValid}`);
  return isValid;
}

handleInfiniteLoop() {
  let needsReposition = false;
  
  if (this.currentIndex <= 0) {
    // On est sur le clone du d√©but (index 0) ‚Üí aller √† la vraie derni√®re image
    this.currentIndex = this.originalSlideCount; // Pas -1 car on compte √† partir de 1
    needsReposition = true;
    // console.log(`Jump to real last: ${this.currentIndex}`);
  } else if (this.currentIndex >= this.totalSlides - 1) {
    // On est sur le clone de fin ‚Üí aller √† la vraie premi√®re image
    this.currentIndex = 1;
    needsReposition = true;
    // console.log(`Jump to real first: ${this.currentIndex}`);
  }
  
  if (needsReposition) {
    // Attendre un frame avant de repositionner pour √©viter les conflits
    requestAnimationFrame(() => {
      this.repositionWithoutTransition();
    });
  }
}

  scrollToSlide(direction, distance = 1) {
  // console.log(`Mobile scroll: direction=${direction}, distance=${distance}, currentIndex=${this.currentIndex}`);
  
  if (this.isScrolling) {
    return;
  }
  
  // Validation du mouvement
  if (!this.isValidMove(direction * distance)) return;

  this.isScrolling = true;
  this.currentIndex += direction * distance;
  
  const focusFrameOffset = this.isMobile ? 
    window.innerWidth * 0.095 : 
    this.getVh(16.667);

  const gap = this.isMobile ? 
    window.innerWidth * 0.04 : 
    this.getVh(4.63);

  const slideWithGap = this.isMobile ? 
    (this.slideWidth + gap) : 
    (this.slideHeight + gap);
    
  const targetPosition = focusFrameOffset - (this.currentIndex * slideWithGap);

  this.track.style.transition = 'transform 0.6s ease';
  
  this.track.style.transform = this.isMobile ?
    `translateX(${targetPosition}px)` :
    `translateY(${targetPosition}px)`;

  setTimeout(() => {
  this.updateScrollIndicator();
  
  // G√©rer la boucle infinie AVANT de mettre √† jour les images
  this.handleInfiniteLoop();
  
  // Puis mettre √† jour les qualit√©s d'image avec les bons indices
  this.updateImageQuality();
  
  // Pr√©charger la prochaine image probable
  this.preloadAdjacentImages();
  
  this.isScrolling = false;
}, 620);
}

  repositionWithoutTransition() {
  const focusFrameOffset = this.isMobile ? 
    window.innerWidth * 0.095 : 
    this.getVh(16.667);

  const gap = this.isMobile ? 
    window.innerWidth * 0.04 : 
    this.getVh(4.63);

  const slideWithGap = this.isMobile ? 
    (this.slideWidth + gap) : 
    (this.slideHeight + gap);
    
  const targetPosition = focusFrameOffset - (this.currentIndex * slideWithGap);
  
  // console.log(`Reposition without transition: index=${this.currentIndex}, position=${targetPosition}`);
  
  this.track.style.transition = 'none';
  
  if (this.isMobile) {
    this.track.style.transform = `translateX(${targetPosition}px)`;
  } else {
    this.track.style.transform = `translateY(${targetPosition}px)`;
  }
  
  // Force le reflow pour appliquer imm√©diatement
  this.track.offsetHeight;
  
  // R√©activer les transitions apr√®s un d√©lai
  setTimeout(() => {
    this.track.style.transition = 'transform 0.6s ease';
  }, 50);
}

  updateScrollIndicator() {
    const indicator = this.track.closest('.carrousel-container').querySelector('.scroll-indicator');
    if (!indicator) return;

    // Utiliser currentIndex - 1 pour exclure le clone du d√©but
    const realIndex = this.currentIndex - 1;
    const progress = (realIndex / (this.originalSlideCount - 1)) * (100 - 20);
    indicator.style.setProperty('--scroll-progress', `${progress}px`);
  }

bindEvents() {
  // Attacher les √©v√©nements directement au conteneur carrousel
  const container = this.track.closest('.carrousel-container');
  
  // Debug : v√©rifier que le conteneur existe
  console.log('Container found:', container);
  
  let startPos = 0;
  let scrollPos = 0;
  let wheelTimeout = null;
  let wheelCount = 0;
  let totalDelta = 0;
  let isTrackpad = false;
  let touchStartTime = 0;
  let touchVelocity = 0;

  // === GESTION WHEEL GLOBALE ===
  const globalWheelHandler = (e) => {
    console.log('Wheel event detected on:', e.target.tagName, e.target.className);
    
    // V√©rifier si on scrolle sur un contr√¥le de m√©dia
    if (this.isScrollingOnMediaControl(e)) {
      console.log('Scrolling on media control, allowing default behavior');
      return; // Laisser le comportement normal
    }
    
    console.log('Preventing default and handling scroll');
    e.preventDefault();
    e.stopPropagation();
    
    wheelCount++;
    let deltaValue = this.isMobile ? 
      (Math.abs(e.deltaX) > Math.abs(e.deltaY) ? e.deltaX : e.deltaY) : 
      e.deltaY;
    
    totalDelta += Math.abs(deltaValue);
    const direction = deltaValue > 0 ? 1 : -1;
    
    console.log(`Direction: ${direction}, Delta: ${deltaValue}`);
    
    if (Math.abs(deltaValue) < 50) isTrackpad = true;
    else if (Math.abs(deltaValue) > 100) isTrackpad = false;
    
    if (wheelTimeout) clearTimeout(wheelTimeout);
    
    wheelTimeout = setTimeout(() => {
      if (this.isScrolling) {
        console.log('Already scrolling, ignoring');
        return;
      }
      
      let distance = this.calculateScrollDistance(wheelCount, totalDelta, isTrackpad);
      console.log(`Scrolling: direction=${direction}, distance=${distance}`);
      this.scrollToSlide(direction, distance);
      
      wheelCount = 0;
      totalDelta = 0;
    }, this.isMobile ? 80 : (isTrackpad ? 150 : 80));
  };

  // === GESTION TOUCH GLOBALE ===
  const globalTouchStartHandler = (e) => {
    console.log('Touch start detected on:', e.target.tagName);
    
    if (this.isScrollingOnMediaControl(e)) {
      console.log('Touch on media control');
      return;
    }
    
    startPos = this.isMobile ? e.touches[0].clientX : e.touches[0].clientY;
    scrollPos = 0;
    touchStartTime = Date.now();
  };

  const globalTouchMoveHandler = (e) => {
    if (this.isScrollingOnMediaControl(e)) {
      return;
    }
    
    const currentPos = this.isMobile ? e.touches[0].clientX : e.touches[0].clientY;
    scrollPos = currentPos - startPos;
    
    if (Math.abs(scrollPos) > this.scrollThreshold) {
      console.log('Touch move preventing default');
      e.preventDefault();
      e.stopPropagation();
    }
  };

  const globalTouchEndHandler = (e) => {
    if (Math.abs(scrollPos) > this.scrollThreshold) {
      const direction = scrollPos > 0 ? -1 : 1;
      const touchDuration = Date.now() - touchStartTime;
      touchVelocity = Math.abs(scrollPos) / touchDuration;
      
      let distance = this.calculateTouchDistance(touchVelocity, Math.abs(scrollPos));
      console.log(`Touch scroll: direction=${direction}, distance=${distance}`);
      this.scrollToSlide(direction, distance);
    }
  };

  // Attacher les √©v√©nements SEULEMENT au conteneur
  console.log('Attaching events to container');
  container.addEventListener('wheel', globalWheelHandler, { passive: false });
  container.addEventListener('touchstart', globalTouchStartHandler, { passive: true });
  container.addEventListener('touchmove', globalTouchMoveHandler, { passive: false });
  container.addEventListener('touchend', globalTouchEndHandler, { passive: true });

}

// AJOUTER cette m√©thode de debug dans la classe
debugCarouselState() {
  console.log(`
    Carousel Debug:
    - Current index: ${this.currentIndex}
    - Total slides: ${this.totalSlides}
    - Is mobile: ${this.isMobile}
    - Is scrolling: ${this.isScrolling}
    - Container exists: ${!!this.track.closest('.carrousel-container')}
    - Track transform: ${this.track.style.transform}
  `);
}

isScrollingOnMediaControl(event) {
  const target = event.target;
  console.log('Checking media control for target:', target.tagName, target.className);
  
  // V√©rifier si on est sur un contr√¥le audio/vid√©o
  if (target.closest('audio, video')) {
    const mediaElement = target.closest('audio, video');
    
    // Pour l'audio, toute la zone est interactive
    if (mediaElement.tagName === 'AUDIO') {
      console.log('Detected audio interaction');
      return true;
    }
    
    // Pour les vid√©os, zone des contr√¥les = 15% du bas
    if (mediaElement.tagName === 'VIDEO') {
      const rect = mediaElement.getBoundingClientRect();
      const clickY = event.clientY || (event.touches && event.touches[0].clientY);
      const controlsZoneHeight = rect.height * 0.15;
      const isInControlsZone = clickY > (rect.bottom - controlsZoneHeight);
      console.log(`Video interaction check: clickY=${clickY}, controlsZone=${rect.bottom - controlsZoneHeight}, isInZone=${isInControlsZone}`);
      return isInControlsZone;
    }
  }
  
  // V√©rifier si on est dans la zone interactive d'une iframe
  if (target.closest('iframe')) {
    const iframe = target.closest('iframe');
    const rect = iframe.getBoundingClientRect();
    const clickX = event.clientX || (event.touches && event.touches[0].clientX);
    const clickY = event.clientY || (event.touches && event.touches[0].clientY);
    
    const margin = 30;
    const isInInteractiveZone = clickX > (rect.left + margin) && 
           clickX < (rect.right - margin) &&
           clickY > (rect.top + margin) && 
           clickY < (rect.bottom - margin);
    
    console.log(`Iframe interaction check: isInZone=${isInInteractiveZone}`);
    return isInInteractiveZone;
  }
  
  console.log('No media control detected');
  return false;
}
}

// Lancer tous les carrousels au DOM pr√™t
document.addEventListener('DOMContentLoaded', () => {
  
  //Peut √™tre pas au bon endroit
// Protection contre le clic droit sur tous les m√©dias
  document.addEventListener('contextmenu', (e) => {
    if (e.target.closest('.carrousel-slide')) {
      e.preventDefault();
      return false;
    }
  });
  
  // Protection contre le drag & drop
  document.addEventListener('dragstart', (e) => {
    if (e.target.closest('.carrousel-slide')) {
      e.preventDefault();
      return false;
    }
  });
  
  // Protection contre les raccourcis clavier
  document.addEventListener('keydown', (e) => {
    if (e.target.closest('.carrousel-slide')) {
      // Emp√™cher Ctrl+S, Ctrl+A, etc.
      if (e.ctrlKey && (e.key === 's' || e.key === 'a' || e.key === 'u')) {
        e.preventDefault();
        return false;
      }
    }
  });

  

  const tracks = document.querySelectorAll('.carrousel-track');
  tracks.forEach(track => {
    const carousel = new VerticalCarousel(track);
    track.carousel = carousel; // Stocker la r√©f√©rence
  });

  // Injecte style pour .scroll-indicator::after
  const style = document.createElement('style');
  style.textContent = `
    .scroll-indicator::after {
      top: var(--scroll-progress, 0px);
    }
  `;
  document.head.appendChild(style);

// Ajouter ce nouveau gestionnaire pour surveiller les changements de section
  const handleSectionChange = () => {
    const tracks = document.querySelectorAll('.carrousel-track');
    tracks.forEach(track => {
      const carousel = track.carousel;
      if (carousel) {
        // Forcer la mise √† jour de tous les m√©dias selon la visibilit√© de leur section
        carousel.updateImageQuality();
      }
    });
  };

  // Surveiller les changements de scroll du conteneur principal
  const mainContainer = document.getElementById('container-projets');
  if (mainContainer) {
    let scrollTimeout;
    mainContainer.addEventListener('scroll', () => {
      clearTimeout(scrollTimeout);
      scrollTimeout = setTimeout(handleSectionChange, 100);
    });
  }
});

</script>


</html>
<!DOCTYPE html>
<html lang="fr">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Projets – Agathe Cotton</title>
        <link rel="icon" type="image/x-icon" href="asset/favicon.ico">
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="style_mobile.css">
        <!-- <link rel="preload" href="/fonts/myfont.woff2" as="font" type="font/woff2" crossorigin="anonymous"> -->
        <script src="script-general.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    </head>

    <body>
        <div class="container container-mosaique">
            <div class="cadre bord-haut"></div>

                    <div class="elements-menu-haut" id="nom-menu">
                        <a class="a-menu logo-menu hoverable" href="index.html"></a>
                        <a class="a-menu hoverable" id="a-nom-menu" href="index.html">Agathe Cotton</a></div>
                    <div class="elements-menu-haut hoverable" id="bio-menu"><a class="a-menu" href="bio.html" data-i18n="menu-bio">Bio</a></div>
                    <div class="elements-menu-haut hoverable" id="projet-menu"><a class="a-menu" href="projets.html" data-i18n="menu-projets">Projets</a></div>
                    <div class="elements-menu-haut hoverable" id="lang-menu"><a class="a-menu" href="#" data-i18n="menu-lang">FR / ENG</a></div>
                    <div class="elements-menu-bas hoverable" id="tel-menu" data-i18n="menu-tel">06 89 32 68 76</div>
                    <div class="elements-menu-bas hoverable" id="mail-menu">agathe.cotton@gmail.com</div>
                    <div class="elements-menu-bas hoverable" id="insta-menu"><a class="a-menu" href="https://www.instagram.com/happy_factoryy/?hl=fr" target="_blank">@happy_factoryy</a></div>
                
            <div class="center-grid-mosaique">
              <a class="case-mosaique case1"  href="projets.html#projet-OffKey">              <img class="img-mosaique" data-lowres="asset/img/low-line/couv-offkey.png"           src="asset/img/low-line/couv-offkey.png"           data-highres="asset/img/high/couv-offkey.jpg" src="asset/img/low/couv-offkey.jpg"                     loading="lazy" alt="case1"></a>
              <a class="case-mosaique case2"  href="projets.html#projet-Stone-of-Amasha">     <img class="img-mosaique" data-lowres="asset/img/low-line/couv-amasha.png"           src="asset/img/low-line/couv-amasha.png"           data-highres="asset/img/high/couv-amasha.jpg" src="asset/img/low/couv-amasha.jpg"                     loading="lazy" alt="case2"></a>
              <a class="case-mosaique case3"  href="projets.html#projet-Brique-Bloc">         <img class="img-mosaique" data-lowres="asset/img/low-line/couv-brique-bloc.png"      src="asset/img/low-line/couv-brique-bloc.png"      data-highres="asset/img/high/couv-brique-bloc.jpg" src="asset/img/low/couv-brique-bloc.jpg"           loading="lazy" alt="case3"></a>
              <a class="case-mosaique case4"  href="projets.html#projet-Affiches-Animees">    <img class="img-mosaique" data-lowres="asset/img/low-line/couv-aff-anim.png"         src="asset/img/low-line/couv-aff-anim.png"         data-highres="asset/img/high/couv-aff-anim.jpg" src="asset/img/low/couv-aff-anim.jpg"                 loading="lazy" alt="case4"></a>
              <a class="case-mosaique case5"  href="projets.html#projet-Vitrine">             <img class="img-mosaique" data-lowres="asset/img/low-line/couv-vitrine.png"          src="asset/img/low-line/couv-vitrine.png"          data-highres="asset/img/high/couv-vitrine.jpg" src="asset/img/low/couv-vitrine.jpg"                   loading="lazy" alt="case5"></a>
              <a class="case-mosaique case6"  href="projets.html#projet-Oursins">             <img class="img-mosaique" data-lowres="asset/img/low-line/couv-oursins.png"          src="asset/img/low-line/couv-oursins.png"          data-highres="asset/img/high/couv-oursins.jpg" src="asset/img/low/couv-oursins.jpg"                   loading="lazy" alt="case6"></a>
              <a class="case-mosaique case7"  href="projets.html#projet-Cimes">               <img class="img-mosaique" data-lowres="asset/img/low-line/couv-cimes.png"            src="asset/img/low-line/couv-cimes.png"            data-highres="asset/img/high/couv-cimes.jpg" src="asset/img/low/couv-cimes.jpg"                       loading="lazy" alt="case7"></a>
              <a class="case-mosaique case8"  href="projets.html#projet-Kaleidoscope">        <img class="img-mosaique" data-lowres="asset/img/low-line/couv-kaleidoscope.png"     src="asset/img/low-line/couv-kaleidoscope.png"     data-highres="asset/img/high/couv-kaleidoscope.jpg" src="asset/img/low/couv-kaleidoscope.jpg"         loading="lazy" alt="case8"></a>
              <a class="case-mosaique case9"  href="projets.html#projet-HAL9000">             <img class="img-mosaique" data-lowres="asset/img/low-line/couv-HAL9000.png"          src="asset/img/low-line/couv-HAL9000.png"          data-highres="asset/img/high/couv-HAL9000.jpg" src="asset/img/low/couv-HAL9000.jpg"                   loading="lazy" alt="case9"></a>
              <a class="case-mosaique case10" href="projets.html#projet-Entre-et-tenir-pt1">  <img class="img-mosaique" data-lowres="asset/img/low-line/couv-tissage.png"          src="asset/img/low-line/couv-tissage.png"          data-highres="asset/img/high/couv-tissage.jpg" src="asset/img/low/couv-tissage.jpg"                   loading="lazy" alt="case10"></a>
              <a class="case-mosaique case11" href="projets.html#projet-Entre-et-tenir-pt2">  <img class="img-mosaique" data-lowres="asset/img/low-line/couv-AR.png"               src="asset/img/low-line/couv-AR.png"               data-highres="asset/img/high/couv-AR.jpg" src="asset/img/low/couv-AR.jpg"                             loading="lazy" alt="case11"></a>
              <a class="case-mosaique case12" href="projets.html#projet-Memoire">             <img class="img-mosaique" data-lowres="asset/img/low-line/couv-memoire.png"          src="asset/img/low-line/couv-memoire.png"          data-highres="asset/img/high/couv-memoire.jpg" src="asset/img/low/couv-memoire.jpg"                   loading="lazy" alt="case12"></a>
              <a class="case-mosaique case13" href="projets.html#projet-Phytomorphose">       <img class="img-mosaique" data-lowres="asset/img/low-line/couv-phytom.png"           src="asset/img/low-line/couv-phytom.png"           data-highres="asset/img/high/couv-phytom.jpg" src="asset/img/low/couv-phytom.jpg"                     loading="lazy" alt="case13"></a>
              <a class="case-mosaique case14" href="projets.html#projet-Just-Click">          <img class="img-mosaique" data-lowres="asset/img/low-line/couv-just-click.png"       src="asset/img/low-line/couv-just-click.png"       data-highres="asset/img/high/couv-just-click.jpg" src="asset/img/low/couv-just-click.jpg"             loading="lazy" alt="case14"></a>
              <a class="case-mosaique case15" href="projets.html#projet-Catalogue-bouees">    <img class="img-mosaique" data-lowres="asset/img/low-line/couv-catalogue-bouees.png" src="asset/img/low-line/couv-catalogue-bouees.png" data-highres="asset/img/high/couv-catalogue-bouees.jpg" src="asset/img/low/couv-catalogue-bouees.jpg" loading="lazy" alt="case15"></a>
            </div>
          </div>

    </body>

    <script>
document.addEventListener("DOMContentLoaded", () => {
  const images = document.querySelectorAll('.img-mosaique');
  const preloadCache = new Map();

  let activeTouchImage = null;

  const switchToHighRes = (img) => {
    const highSrc = img.dataset.highres;

    if (!img.switchState.isHighRes) {
      if (!preloadCache.has(highSrc)) {
        const tmp = new Image();
        tmp.onload = () => {
          preloadCache.set(highSrc, true);
          img.src = highSrc;
          img.switchState.isHighRes = true;
          console.log('[SWITCH HD]', highSrc);
        };
        tmp.src = highSrc;
      } else {
        img.src = highSrc;
        img.switchState.isHighRes = true;
        console.log('[SWITCH HD CACHED]', highSrc);
      }
    }
  };

  const revertToLowRes = (img) => {
    const lowSrc = img.dataset.lowres;
    if (img.switchState.isHighRes) {
      setTimeout(() => {
        img.src = lowSrc;
        img.switchState.isHighRes = false;
        console.log('[REVERT LOWRES]', lowSrc);
      }, 100);
    }
  };

  images.forEach(img => {
    img.switchState = {
      isHighRes: false,
    };

    // Desktop
    img.addEventListener('mouseenter', () => {
      switchToHighRes(img);
    });

    img.addEventListener('mouseleave', () => {
      revertToLowRes(img);
    });

    // Mobile
    img.addEventListener('touchstart', () => {
      activeTouchImage = img;
      switchToHighRes(img);
    });

    img.addEventListener('touchmove', () => {
      // Ignoré
    });

    // Touchend sur le document pour ne pas le rater
    document.addEventListener('touchend', () => {
      if (activeTouchImage) {
        revertToLowRes(activeTouchImage);
        activeTouchImage = null;
      }
    }, { passive: true });

    img.addEventListener('contextmenu', (e) => {
      e.preventDefault(); // Évite le menu contextuel sur tap long
    });
  });
});
</script>

</html>